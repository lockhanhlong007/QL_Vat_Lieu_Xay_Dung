var ImagesManagementAjax=function(){function t(){$("body").on("click",".btn-images",function(n){n.preventDefault();var t=$(this).data("id");$("#hidId").val(t);i();$("#modal-image-manage").modal("show")});$("body").on("click",".btn-delete-image",function(n){n.preventDefault();$(this).closest("div").remove()});$("#fileImage").on("change",function(){for(var u=$(this).get(0),i=u.files,r=new FormData,t=0;t<i.length;t++)r.append(i[t].name,i[t]);$.ajax({type:"POST",url:"/Admin/UploadImageFile/UploadImage",contentType:!1,processData:!1,data:r,success:function(t){n.push(t);$("#image-list").append('<div class="col-md-3"><img width="100px"  data-path="'+t+'" src="'+t+'"><\/div>');app.notify("Đã tải ảnh lên thành công!","success")},error:function(){app.notify("There was error uploading files!","error")}})});$("#btnSaveImages").on("click",function(){var n=[],t=$("#image-list").find("img");console.log("Test1 : "+t);console.log("Test1 : "+t.data);$.each($("#image-list").find("img"),function(){var t=$(this).data("path");console.log(t);n.push(t)});$.ajax({url:"/admin/Product/SaveImages",data:{productId:$("#hidId").val(),images:n},type:"post",dataType:"json",success:function(){$("#modal-image-manage").modal("hide");$("#image-list").html("")}})})}function i(){$.ajax({url:"/admin/Product/GetImages",data:{productId:$("#hidId").val()},type:"get",dataType:"json",success:function(n){var t="";$.each(n,function(n,i){t+='<div class="col-md-3"><img width="100" data-path="'+i.Path+'" src="'+i.Path+'"><br/><a href="#" class="btn-delete-image">Xóa<\/a><\/div>'});$("#image-list").html(t)}})}var n=[];this.initialize=function(){t()}};