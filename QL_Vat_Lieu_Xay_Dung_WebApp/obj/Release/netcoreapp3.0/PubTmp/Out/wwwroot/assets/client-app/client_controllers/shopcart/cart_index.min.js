var ProductAjax=function(){function i(){$("body").on("click",".btn-delete",function(i){i.preventDefault();var r=$(this).data("id");$.ajax({url:"/ShopCart/RemoveFromCart",type:"post",data:{productId:r},success:function(){client_app.notify("Xóa Thành Công.","Thành Công");t();n()}})});$("body").on("keyup",".txtQuantity",function(i){i.preventDefault();var u=$(this).data("id"),r=$(this).val();r>0?$.ajax({url:"/ShopCart/UpdateCart",type:"post",data:{productId:u,quantity:r},success:function(){client_app.notify("Cập Nhật Thành Công","Thành Công");t();n()}}):client_app.notify("Số Lượng Này Không Tồn Tại","error")});$("#btnClearAll").on("click",function(i){i.preventDefault();$.ajax({url:"/ShopCart/ClearCart",type:"post",success:function(){client_app.notify("Đã Xóa Sạch Sản Phẩm Trong Giỏ Hàng","Thành Công");t();n()}})})}function t(){$("#headerCart").load("/Home/RefreshCart")}function n(){return $.ajax({url:"/ShopCart/GetCart",type:"GET",dataType:"json",success:function(n){var r=$("#template-cart").html(),t="",i=0;$.each(n,function(n,u){t+=Mustache.render(r,{ProductId:u.Product.Id,ProductName:u.Product.Name,Image:u.Product.Image,Price:u.Price.toLocaleString("vi",{style:"currency",currency:"VND"}),Quantity:u.Quantity,Sizes:u.Size.Name,Amount:(u.Price*u.Quantity).toLocaleString("vi",{style:"currency",currency:"VND"}),Url:"/"+u.Product.SeoAlias+"-p."+u.Product.Id+".html"});i+=u.Price*u.Quantity});$("#lblTotalAmount").text(i.toLocaleString("vi",{style:"currency",currency:"VND"}));t!==""?$("#table-cart-content").html(t):$("#table-cart-content").html("Không Có Sản Phẩm Trong Giỏ Hàng")}}),!1}this.initialize=function(){n();i()}};